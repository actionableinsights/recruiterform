<!DOCTYPE html>
<html>
	<head>
		<title>Application Form</title>
		<!-- dependencies (jquery, handlebars and bootstrap) -->
		<script type="text/javascript" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
		<link type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"/>
		<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

		<!-- alpaca -->
		<link type="text/css" href="js/alpaca/bootstrap/alpaca.min.css" rel="stylesheet"/>
		<script type="text/javascript" src="js/alpaca/bootstrap/alpaca.min.js"></script>
		<script
			src="/js/lib/bootstrap-multiselect/js/bootstrap-multiselect.js"></script>
		<link rel="stylesheet"
			  href="js/lib/bootstrap-multiselect/css/bootstrap-multiselect.css" />
	</head>
	<body>
		<div class="container">
			<div>
				<h1>Partner Applications</h1>

				<p>To work with us as a Translator, Editor or Proofreader, we
				need to know more about you and your skillset. Please fill in
				the form below and submit you application. Thank you!
				</p>
			</div>
			<div id="form1">
			</div>
		</div>
	<script type="text/javascript">
		const multiselect = {
			"type": "select",
			"multiple": true,
			"multiselect": {
				"maxHeight": 300
			},
			"size": 5
		};

		$('#form1').alpaca({
			"schemaSource": "/schema.json",
			"options": {
				"fields": {
					"email": {
						"helper": "This allows us to email you about translation"
							+ " jobs that we may have available in your language pair"
					},
					"mobile_phone_number": {
						"label": "Whatsapp",
						"helper": "This allows us to contact you directly for"
							+ " urgent translation projects"
					},
					"skillset": {
						"type": "checkbox",
						"label": "[Skillset] I can:"
					},
					"translate_from": multiselect,
					"translate_to": multiselect,
					"country": {
						"type": "country",
						"helper": "This helps us comply with our clients'"
							+ " requirements and any local privacy legislations."
					},
					"word_count": {
						"helper": "This helps us understand your capacity when"
							+ " assigning you jobs."
					},
					"cat_tools": multiselect,
					"proz_profile_url": {
						"type": "url",
						"helper": "This helps us evaluate your experience and"
							+ " and prior feedback."
					},
					"additional_info": {
						"type": "textarea",
						"label": "Additional info (optional)"
					}
				},
				"form": {
					"attributes": {
						"action": "/submit",
						"method": "post"
					},
					"buttons": {
						"submit": {
							"title": "Submit Form",
							"click": function() {
								this.refreshValidationState(true);
								if (!this.isValid(true)) {
									this.focus();
									return;
								}
								const data = this.getValue();
								jQuery.ajax({
									type: "POST",
									url: "/submit", 
									data: JSON.stringify(data), 
									contentType: 'application/json',
									dataType: 'json',
									success: (r) => console.log('Response', r)
								});
							}
						}
					}
				}
			}
		});
	</script>
	</body>
</html>

